(function(){"use strict";var e={7398:function(e,t,r){var a=r(6369),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("h1",[e._v("都道府県別人口推移グラフ")]),t("prefecture-list"),t("div",{staticClass:"chart-box"},[0===e.datasets.length?t("div",[e._v("読み込み中")]):t("chart-graph",{staticClass:"chart-graph",attrs:{labels:e.labels,datasets:e.datasets}})],1)],1)},n=[];r(7658);const c={apikey:"NOzVq54E4YevuptSgWzlAS7C0Be8yjA0PScpOqJs"},o="https://opendata.resas-portal.go.jp/api/",i=c.apikey;async function u(e=""){const t={method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8","X-API-KEY":i}},r=await fetch(o+e,t);if(r.ok){const e=await r.json();return e.result}}var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"list-box"},[t("h2",[e._v("都道府県一覧")]),t("ul",[0===e.prefectures.length?t("li",[e._v("読み込み中")]):e._e(),e._l(e.prefectures,(function(r,a){return t("li",{key:a},[t("label",{attrs:{for:`prefecture-${r.prefCode}`}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectPrefectures,expression:"selectPrefectures"}],attrs:{type:"checkbox",id:`prefecture-${r.prefCode}`},domProps:{value:r,checked:Array.isArray(e.selectPrefectures)?e._i(e.selectPrefectures,r)>-1:e.selectPrefectures},on:{change:function(t){var a=e.selectPrefectures,s=t.target,n=!!s.checked;if(Array.isArray(a)){var c=r,o=e._i(a,c);s.checked?o<0&&(e.selectPrefectures=a.concat([c])):o>-1&&(e.selectPrefectures=a.slice(0,o).concat(a.slice(o+1)))}else e.selectPrefectures=n}}}),e._v(" "+e._s(r.prefName)+" ")])])}))],2)])},f=[],p={name:"PrefectureList",data(){return{prefectures:[],selectPrefectures:[]}},async created(){this.prefectures=await u("v1/prefectures")},watch:{selectPrefectures(){this.$store.commit("setSelectPrefecture",this.selectPrefectures)}}},d=p,h=r(1001),v=(0,h.Z)(d,l,f,!1,null,"119d7a2a",null),y=v.exports,P=function(){var e=this;e._self._c;return e._m(0)},m=[function(){var e=this,t=e._self._c;return t("div",[t("canvas",{staticClass:"chart-graph",attrs:{id:"populationGraph",width:"300",height:"200"}})])}],b=r(1632),g={data(){return{}},components:{},name:"ChartGraph",props:["labels","datasets"],async mounted(){new b.ZP("populationGraph",{type:"line",data:{labels:this.labels,datasets:this.datasets,min:0,max:100},options:{responsive:!0,plugins:{legend:{display:!0,position:"bottom",labelString:"apple"}}}})},methods:{}},_=g,w=(0,h.Z)(_,P,m,!1,null,null,null),C=w.exports,k={data(){return{labels:[1960,1965,1970,1975,1980,1985,1990,1995,2e3,2005,2010,2015,2020],datasets:[],boundaryYear:0}},name:"App",components:{PrefectureList:y,ChartGraph:C},async created(){const e=await u("v1/population/composition/perYear?cityCode=-&prefCode=1");e.data[0].data.forEach((e=>{e.year<=this.boundaryYear&&this.labels.push(e.year)}));const t=new Array(this.labels.length).fill(0);this.datasets=[{data:t,label:"都道府県"}]},methods:{async getPopulationJson(e){this.datasets=[],e.forEach((async e=>{const t=await u(`v1/population/composition/perYear?cityCode=-&prefCode=${e.prefCode}`);0===this.boundaryYear&&(this.boundaryYear=t.boundaryYear);const r=[];t.data[0].data.forEach((e=>{e.year<=this.boundaryYear&&r.push(e.value)}));const a={data:r,label:e.prefName};this.datasets.push(a)}))}},computed:{setSelectPrefecture(){return this.$store.getters.getSelectPrefecture}},watch:{setSelectPrefecture(e){this.getPopulationJson(e)}}},O=k,x=(0,h.Z)(O,s,n,!1,null,null,null),S=x.exports,j=r(3822);a.ZP.use(j.ZP);var Y=new j.ZP.Store({state:{prefectures:[],selectPrefectures:[]},getters:{getPrefecture(e){return e.prefectures},getSelectPrefecture(e){return e.selectPrefectures}},mutations:{setPrefecture(e,t){e.prefectures=t},setSelectPrefecture(e,t){e.selectPrefectures=t}},actions:{},modules:{}});a.ZP.config.productionTip=!1,new a.ZP({store:Y,render:e=>e(S)}).$mount("#app")}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,a,s,n){if(!a){var c=1/0;for(l=0;l<e.length;l++){a=e[l][0],s=e[l][1],n=e[l][2];for(var o=!0,i=0;i<a.length;i++)(!1&n||c>=n)&&Object.keys(r.O).every((function(e){return r.O[e](a[i])}))?a.splice(i--,1):(o=!1,n<c&&(c=n));if(o){e.splice(l--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[a,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,c=a[0],o=a[1],i=a[2],u=0;if(c.some((function(t){return 0!==e[t]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(i)var l=i(r)}for(t&&t(a);u<c.length;u++)n=c[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(l)},a=self["webpackChunkyumemi_task"]=self["webpackChunkyumemi_task"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(7398)}));a=r.O(a)})();
//# sourceMappingURL=app.abde739c.js.map